{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/file-upload/macro.njk" import govukFileUpload %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/select/macro.njk" import govukSelect %}

{% set items = categories() | await %}

<div class="govuk-grid-column-two-thirds">

  <h1 class="govuk-heading-xl">Upload your file</h1>

  {% if flash %}
    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: [
        {
          html: flash | escape,
          href: "#file-upload"
        }
      ]
    }) }}
  {% endif %}

  <p class="govuk-body">Upload the entity data for the category you are importing.<p>

  <a class="govuk-link" href="{{ config.paths.dataEntryEntity.categoryTemplate }}?category=Measure" target="_blank">Download the latest template for Measures.</a><br>

  <form action="{{ config.paths.dataEntryEntity.bulkUploadFile }}" method="post" encType="multipart/form-data">
    <input type="hidden" name="category" value="Measure" />

    {{ govukFileUpload({
      id: "file-upload",
      name: "import",
      label: {
        text: "Upload a file"
      }
    }) }}

    {{ govukButton({
      text: "Upload",
      type: "submit",
      preventDoubleClick: true
    }) }}
  </form>
</div>