{% extends "template.njk" %}

{% set data = data() | await %}

{% block pageTitle %}Theme{% endblock %}

{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-one-quarter top-statements">
  {% for topOutcome in data.topLevelOutcomeStatements %}
  <a href="{{ topOutcome.link }}" class="statement-link">
    <div class="statement {{ topOutcome.color }} {{ 'active-statement' if topOutcome.active }}">
        <h4 class="govuk-heading-s">{{ topOutcome.name }}
        {% if topOutcome.active %} <img src='/assets/images/arrow.png' class='active' alt='active' /> {% endif %}
        </h4>
        <p class="govuk-body">{{ topOutcome.description }}</p>
    </div>
   </a>
  {% endfor %}
  </div>

  <div class="govuk-grid-column-one-quarter">
    {% for subOutcome in data.subOutcomeStatementsAndDatas %}
      {{ subOutcome.name }}: {{ subOutcome.color }}<br>
    {% endfor %}
  </div>

  <div class="govuk-grid-column-one-half">
  {% if tableauIframeError %}
    <p class="govuk-body govuk-!-font-weight-bold tableu-message">There has been an error accessing this data, please contact The Transition Taskforce Dashboard Team</p>
  {% elseif topOutcomeSelected %}
    <p class="govuk-body govuk-!-font-weight-bold tableu-message">To view data, select a metric or measure</p>
  {% else %}
    <iframe src="{{ tableauIframeUrl }}" class="theme-tableu"></iframe>
  {% endif %}
  </div>

</div>


{% endblock %}

